TLP_ENABLE=1

# Enable debug
#TLP_DEBUG="arg bat disk lock nm path pm ps rf run sysfs udev usb"

# intel_pstate
#
# Intel Core i 2nd gen. (“Sandy Bridge”) or newer Intel CPUs provide these modes:
#
#     active
#
#     passive
#
# Starting with kernel 5.7, the intel_pstate driver selects passive mode aka intel_cpufreq for CPUs that do not support
# hardware-managed P-states (HWP), i.e. Intel Core i 5th gen. or older.
#
# acpi-cpufreq
#
#WARN: Older AMD/Intel CPUs and other vendors do not support change of driver mode.
#
# This is default active mode.
# CPU_DRIVER_OPMODE_ON_AC=active
# CPU_DRIVER_OPMODE_ON_BAT=active

#WARN: Do not use this setting with the intel_pstate driver in active mode, use CPU_MIN/MAX_PERF_ON_AC/BAT instead
#
# CPU frequency scaling
# CPU_SCALING_MIN_FREQ_ON_AC=400000    # 400 MHz
# CPU_SCALING_MAX_FREQ_ON_AC=4200000   # 4.2 GHz
# CPU_SCALING_MIN_FREQ_ON_BAT=400000   # 400 MHz
# CPU_SCALING_MAX_FREQ_ON_BAT=1300000  # 1.3 GHz

#########
##   CPU RELATED SETTINGS   ##
########

# Intel pstate settings
CPU_MIN_PERF_ON_AC=0
CPU_MAX_PERF_ON_AC=100
CPU_MIN_PERF_ON_BAT=0
CPU_MAX_PERF_ON_BAT=50

# # CPU scaling governor
# amd-pstate | intel_pstate in active mode
#
#     performance
#
#     powersave – default
#
# amd-state in passive or guided mode | intel_pstate in passive mode | acpi-cpufreq
#
#     conservative
#
#     ondemand – default for most distributions
#
#     userspace
#
#     powersave
#
#     performance
#
# some user says schedutil is better than powersave, it save more power.
#     schedutil – default for newer kernels and the amd-pstate/intel_pstate drivers in passive mode
#
CPU_SCALING_GOVERNOR_ON_AC=performance
CPU_SCALING_GOVERNOR_ON_BAT=powersave

# GPU
INTEL_GPU_MIN_FREQ_ON_BAT=100
INTEL_GPU_MAX_FREQ_ON_BAT=1000
INTEL_GPU_BOOST_FREQ_ON_BAT=1250

INTEL_GPU_MIN_FREQ_ON_AC=100
INTEL_GPU_MAX_FREQ_ON_AC=1100
INTEL_GPU_BOOST_FREQ_ON_AC=1250


# Set CPU energy/performance policies (in order of increasing power saving):
#
#     performance
#
#     balance_performance
#
#     default
#
#     balance_power
#
#     power
#
# Default when unconfigured: balance_performance (AC), balance_power (BAT)
#
# Requirements:
# CPU energy policy
CPU_ENERGY_PERF_POLICY_ON_AC=balance_performance
CPU_ENERGY_PERF_POLICY_ON_BAT=balance_power

# CPU boost
  # A value of 1 does not activate boosting, it just allows it
CPU_BOOST_ON_AC=1
CPU_BOOST_ON_BAT=0

# #WARN: Requires: Intel Core i 6th gen. (“Skylake”) or newer CPU with intel_pstate scaling driver in active mode
CPU_HWP_DYN_BOOST_ON_BAT=0
CPU_HWP_DYN_BOOST_ON_AC=1


# Battery charge thresholds
START_CHARGE_THRESH_BAT0=85
STOP_CHARGE_THRESH_BAT0=90

# ThinkPad drivers
TPACPI_ENABLE=1
TPSMAPI_ENABLE=1

# SCHED_POWERSAVE_ON_BAT=1 # #! Parameter was removed: obsolete since kernel 3.5
SOUND_POWER_SAVE_ON_BAT=1

# Sleep mode
#
# s2idle - Idle standby, a pure software, light-weight, system sleep state
#
# deep - Suspend to RAM, the whole system is put into a low-power state, except for memory, usually resulting in higher savings than s2idle
#
#WARN: Changing suspend mode may lead to system instability and even data loss.
# As for the availability of different modes on your system,
# check the output of tlp-stat -s. If unsure, stick with the system default by not enabling this.
#
# Suspend mode   = [s2idle]
MEM_SLEEP_ON_AC=s2idle
MEM_SLEEP_ON_BAT=s2idle

# Platform profiles
# /sys/firmware/acpi/platform_profile_choices            = low-power balanced performance
PLATFORM_PROFILE_ON_AC=balanced
PLATFORM_PROFILE_ON_BAT=low-power

# WiFi power management
WIFI_PWR_ON_BAT=on
WIFI_PWR_ON_AC=off

# Device management
# wwan is not used currently, enable if you need it:
DEVICES_TO_DISABLE_ON_BAT_NOT_IN_USE="bluetooth wwan"
DEVICES_TO_ENABLE_ON_STARTUP="wifi"

DEVICES_TO_DISABLE_ON_LAN_CONNECT="wifi wwan"
DEVICES_TO_DISABLE_ON_WIFI_CONNECT="wwan"
DEVICES_TO_DISABLE_ON_WWAN_CONNECT="wifi"

DEVICES_TO_ENABLE_ON_LAN_DISCONNECT="wifi"
DEVICES_TO_ENABLE_ON_WIFI_DISCONNECT=""
DEVICES_TO_ENABLE_ON_WWAN_DISCONNECT=""

# USB power management
# ERROR: hci0: link tx timeout -> happen because of autosuspend
# Disable bluetooth autosuspend via device ID
# USB_DENYLIST="8087:0aaa"

USB_EXCLUDE_BTUSB=0
USB_AUTOSUSPEND=1
USB_EXCLUDE_AUDIO=1
USB_EXCLUDE_PHONE=0
USB_EXCLUDE_WWAN=0

# SATA link power management
SATA_LINKPWR_ON_BAT=med_power_with_dipm
SATA_LINKPWR_ON_AC=max_performance

# PCIe power management
PCIE_ASPM_ON_AC=default
PCIE_ASPM_ON_BAT=powersave

RUNTIME_PM_ON_AC=auto
RUNTIME_PM_ON_BAT=auto
